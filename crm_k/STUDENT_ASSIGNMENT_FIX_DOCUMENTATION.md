# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º —É—á–µ–Ω–∏–∫–æ–≤ –∏ –∑–∞–Ω—è—Ç–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ–∑–Ω–∏–∫–ª–∞ –Ω–æ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- –£—á–µ–Ω–∏–∫–∏ –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—á–∏—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–æ–¥–∏–ª —Å –Ω–∏–º–∏ –∑–∞–Ω—è—Ç–∏–µ
- –í—Å–µ –∑–∞–Ω—è—Ç–∏—è —É—á–µ–Ω–∏–∫–∞ "–ø–µ—Ä–µ—Ö–æ–¥–∏–ª–∏" –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —É—á–∏—Ç–µ–ª—é
- –í —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É—á–∏—Ç–µ–ª—è

## –†–µ—à–µ–Ω–∏–µ

### 1. –£–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞ —É—á–∏—Ç–µ–ª—é

**–î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```typescript
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–Ω—è—Ç–∏—è –∞–¥–º–∏–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–ª —É—á–µ–Ω–∏–∫–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —É—á–∏—Ç–µ–ª—é
if (authUser.role === 'ADMIN' && body.userId) {
  await prisma.student.updateMany({
    where: { id: { in: students.map(s => s.id) } },
    data: { userId: body.userId, isAssigned: true }
  });
}
```

**–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```typescript
// –£–±–∏—Ä–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞ —É—á–∏—Ç–µ–ª—é
// –¢–µ–ø–µ—Ä—å —É—á–µ–Ω–∏–∫ –æ—Å—Ç–∞–µ—Ç—Å—è —É –≤—Å–µ—Ö —É—á–∏—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–æ–¥–∏–ª–∏ —Å –Ω–∏–º –∑–∞–Ω—è—Ç–∏—è
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤

**API `/api/students`:**
- **–î–æ**: –ü–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ —É—á–µ–Ω–∏–∫–æ–≤, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (`userId: authUser.id`)
- **–ü–æ—Å–ª–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ—Ö —É—á–µ–Ω–∏–∫–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≤–æ–¥–∏–ª –∑–∞–Ω—è—Ç–∏—è (`lessons.some.teacherId: authUser.id`)

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π

**API `/api/lessons`:**
- **–î–æ**: –ü–æ–∫–∞–∑—ã–≤–∞–ª —Ç–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç–∏—è —Å–≤–æ–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤ (`student.userId: authUser.id`)
- **–ü–æ—Å–ª–µ**: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–Ω—è—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≤–æ–¥–∏–ª (`teacherId: authUser.id`)

### 4. –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥—Ä—É–≥–∏–µ API

- **`/api/lessons/upcoming`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `teacherId`
- **`/api/payments/unpaid-lessons`** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ `teacherId`
- **`/api/payments`** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `teacherId`

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ **–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

1. **–£—á–µ–Ω–∏–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è —É –≤—Å–µ—Ö —É—á–∏—Ç–µ–ª–µ–π** - –∫–∞–∂–¥—ã–π —É—á–∏—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É—á–µ–Ω–∏–∫–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–æ–≤–æ–¥–∏–ª –∑–∞–Ω—è—Ç–∏—è
2. **–ó–∞–Ω—è—Ç–∏—è –Ω–µ "–ø–µ—Ä–µ—Ö–æ–¥—è—Ç"** - –∫–∞–∂–¥–æ–µ –∑–∞–Ω—è—Ç–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è —É —Ç–æ–≥–æ —É—á–∏—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –µ–≥–æ –ø—Ä–æ–≤–æ–¥–∏–ª
3. **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–Ω—è—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–æ–¥–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
4. **–ö–∞–ª–µ–Ω–¥–∞—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–Ω—è—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–æ–¥–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
5. **–î–æ—Ö–æ–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏** - –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∑–∞ —Ç–µ–º —É—á–∏—Ç–µ–ª–µ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–æ–¥–∏–ª –∑–∞–Ω—è—Ç–∏—è

### üîÑ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–ø–µ—Ä—å:**

1. **–£—á–∏—Ç–µ–ª—å –ê** —Å–æ–∑–¥–∞–µ—Ç –∑–∞–Ω—è—Ç–∏–µ —Å —É—á–µ–Ω–∏–∫–æ–º ‚Üí —É—á–µ–Ω–∏–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —É—á–µ–Ω–∏–∫–æ–≤ —É—á–∏—Ç–µ–ª—è –ê
2. **–ê–¥–º–∏–Ω** —Å–æ–∑–¥–∞–µ—Ç –∑–∞–Ω—è—Ç–∏–µ —Å —Ç–µ–º –∂–µ —É—á–µ–Ω–∏–∫–æ–º —É **—É—á–∏—Ç–µ–ª—è –ë** ‚Üí —É—á–µ–Ω–∏–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —É—á–µ–Ω–∏–∫–æ–≤ —É—á–∏—Ç–µ–ª—è –ë
3. **–£—á–∏—Ç–µ–ª—å –ê** –≤–∏–¥–∏—Ç —É—á–µ–Ω–∏–∫–∞ –∏ —Å–≤–æ–∏ –∑–∞–Ω—è—Ç–∏—è —Å –Ω–∏–º
4. **–£—á–∏—Ç–µ–ª—å –ë** –≤–∏–¥–∏—Ç —É—á–µ–Ω–∏–∫–∞ –∏ —Å–≤–æ–∏ –∑–∞–Ω—è—Ç–∏—è —Å –Ω–∏–º
5. **–î–æ—Ö–æ–¥—ã** –æ—Å—Ç–∞—é—Ç—Å—è —É –∫–∞–∂–¥–æ–≥–æ —É—á–∏—Ç–µ–ª—è –∑–∞ –µ–≥–æ –∑–∞–Ω—è—Ç–∏—è

### üìã **–õ–æ–≥–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞:**

- **–ê–¥–º–∏–Ω**: –í–∏–¥–∏—Ç –≤—Å–µ—Ö —É—á–µ–Ω–∏–∫–æ–≤ –∏ –≤—Å–µ –∑–∞–Ω—è—Ç–∏—è
- **–û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —É—á–µ–Ω–∏–∫–æ–≤, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–æ–≤–æ–¥–∏–ª –∑–∞–Ω—è—Ç–∏—è, –∏ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–Ω—è—Ç–∏—è

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

- `src/app/api/lessons/route.ts` - —É–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞
- `src/app/api/lessons/bulk/route.ts` - —É–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞
- `src/app/api/students/route.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É—á–µ–Ω–∏–∫–æ–≤
- `src/app/api/lessons/route.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–Ω—è—Ç–∏–π
- `src/app/api/lessons/upcoming/route.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞
- `src/app/api/payments/unpaid-lessons/route.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞
- `src/app/api/payments/route.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- `src/components/forms/AddLessonForm.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —É—á–µ–Ω–∏–∫–æ–≤

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

1. **–£—á–∏—Ç–µ–ª—å –ê** —Å–æ–∑–¥–∞–µ—Ç –∑–∞–Ω—è—Ç–∏–µ —Å —É—á–µ–Ω–∏–∫–æ–º
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—á–µ–Ω–∏–∫ –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ —É—á–µ–Ω–∏–∫–æ–≤ —É—á–∏—Ç–µ–ª—è –ê
3. **–ê–¥–º–∏–Ω** —Å–æ–∑–¥–∞–µ—Ç –∑–∞–Ω—è—Ç–∏–µ —Å —Ç–µ–º –∂–µ —É—á–µ–Ω–∏–∫–æ–º —É **—É—á–∏—Ç–µ–ª—è –ë**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—á–µ–Ω–∏–∫ –ø–æ—è–≤–∏–ª—Å—è –≤ —Å–ø–∏—Å–∫–µ —É—á–µ–Ω–∏–∫–æ–≤ —É—á–∏—Ç–µ–ª—è –ë
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ **—É—á–∏—Ç–µ–ª—å –ê** –≤—Å–µ –µ—â–µ –≤–∏–¥–∏—Ç —É—á–µ–Ω–∏–∫–∞ –∏ —Å–≤–æ–∏ –∑–∞–Ω—è—Ç–∏—è —Å –Ω–∏–º
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ **—É—á–∏—Ç–µ–ª—å –ë** –≤–∏–¥–∏—Ç —É—á–µ–Ω–∏–∫–∞ –∏ —Å–≤–æ–∏ –∑–∞–Ω—è—Ç–∏—è —Å –Ω–∏–º
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ—Ö–æ–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è —É –∫–∞–∂–¥–æ–≥–æ —É—á–∏—Ç–µ–ª—è –∑–∞ –µ–≥–æ –∑–∞–Ω—è—Ç–∏—è

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –ê–¥–º–∏–Ω –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –º–æ–∂–µ—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∑–∞–Ω—è—Ç–∏—è —Å –ª—é–±—ã–º–∏ —É—á–µ–Ω–∏–∫–∞–º–∏ –ª—é–±–æ–º—É —É—á–∏—Ç–µ–ª—é
- ‚úÖ –î–æ—Ö–æ–¥—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∑–∞ —É—á–∏—Ç–µ–ª—è–º–∏, –ø—Ä–æ–≤–æ–¥–∏–≤—à–∏–º–∏ –∑–∞–Ω—è—Ç–∏—è
