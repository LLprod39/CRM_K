# –ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ CRM_K

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **Clean Architecture** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ª–æ–µ–≤:

```
üìÅ src/
‚îú‚îÄ‚îÄ üéØ domain/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –Ω–∏ –æ—Ç —á–µ–≥–æ)
‚îú‚îÄ‚îÄ üîÑ application/     # Use Cases (–∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç domain)
‚îú‚îÄ‚îÄ üîß infrastructure/  # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ (—Ä–µ–∞–ª–∏–∑—É–µ—Ç domain –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã)
‚îú‚îÄ‚îÄ üé® presentation/    # UI —Å–ª–æ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç application)
‚îî‚îÄ‚îÄ üîó shared/          # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ —Å–ª–æ—è–º–∏)
```

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

| –°—É—â–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è |
|----------|----------|---------------|
| **Student** | –£—á–µ–Ω–∏–∫ | fullName, phone, age, parentName |
| **Lesson** | –£—Ä–æ–∫ | date, endTime, cost, isCompleted, isPaid |
| **User** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | email, name, role (ADMIN/USER) |
| **Payment** | –ü–ª–∞—Ç–µ–∂ | amount, date, studentId |
| **Toy** | –ò–≥—Ä—É—à–∫–∞ | name, category, isAvailable |
| **AISuggestion** | –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ò–ò | title, goals, materials, structure |

## üîÑ Use Cases (–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

### Student Use Cases
- `GetStudentsUseCase` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–µ–Ω–∏–∫–æ–≤
- `CreateStudentUseCase` - –°–æ–∑–¥–∞–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞
- `UpdateStudentUseCase` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞
- `DeleteStudentUseCase` - –£–¥–∞–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞

### Lesson Use Cases
- `GetLessonsUseCase` - –ü–æ–ª—É—á–µ–Ω–∏–µ —É—Ä–æ–∫–æ–≤
- `CreateLessonUseCase` - –°–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–∫–∞
- `UpdateLessonUseCase` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–∫–∞

### Auth Use Cases
- `LoginUseCase` - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### Finance Use Cases
- `GetFinancialStatsUseCase` - –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## üóÑÔ∏è –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã |
|-----------|----------|-----------------|
| `IStudentRepository` | –†–∞–±–æ—Ç–∞ —Å —É—á–µ–Ω–∏–∫–∞–º–∏ | findAll, findById, create, update, delete |
| `ILessonRepository` | –†–∞–±–æ—Ç–∞ —Å —É—Ä–æ–∫–∞–º–∏ | findAll, findByDateRange, findUnpaidLessons |
| `IUserRepository` | –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ | findByEmail, validateCredentials |
| `IPaymentRepository` | –†–∞–±–æ—Ç–∞ —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏ | findAll, findByStudentId |

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ö–æ–Ω—Ç–µ–∫—Å—Ç—ã
- `AuthContext` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- `ToastContext` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –•—É–∫–∏
- `useToast` - –†–∞–±–æ—Ç–∞ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

### –°—Ç—Ä–∞–Ω–∏—Ü—ã
- `/` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `/students` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ–Ω–∏–∫–∞–º–∏
- `/schedule` - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
- `/finances` - –§–∏–Ω–∞–Ω—Å—ã
- `/admin` - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- `/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

## üîå API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
```
POST   /api/auth/login              # –í—Ö–æ–¥
GET    /api/students                # –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤
POST   /api/students                # –°–æ–∑–¥–∞—Ç—å —É—á–µ–Ω–∏–∫–∞
GET    /api/lessons                 # –°–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤
POST   /api/lessons                 # –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫
GET    /api/finances/stats          # –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET    /api/admin/stats             # –ê–¥–º–∏–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Frontend
- **Next.js 15** - React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **TypeScript** - –¢–∏–ø–∏–∑–∞—Ü–∏—è
- **Tailwind CSS** - –°—Ç–∏–ª–∏
- **React 19** - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

### Backend
- **Next.js API Routes** - API
- **Prisma ORM** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **JWT** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
- **Recharts** - –ì—Ä–∞—Ñ–∏–∫–∏
- **Google GenAI** - –ò–ò
- **XLSX** - –≠–∫—Å–ø–æ—Ä—Ç

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –°–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
npm run build

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å–∏–∏
npm start
```

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- `users` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `students` - –£—á–µ–Ω–∏–∫–∏
- `lessons` - –£—Ä–æ–∫–∏
- `payments` - –ü–ª–∞—Ç–µ–∂–∏
- `toys` - –ò–≥—Ä—É—à–∫–∏
- `ai_suggestions` - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ò–ò

### –°–≤—è–∑–∏
- User ‚Üí Students (1:many)
- Student ‚Üí Lessons (1:many)
- Student ‚Üí Payments (1:many)
- Payment ‚Üí Lessons (many:many)

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **JWT —Ç–æ–∫–µ–Ω—ã** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **bcrypt** –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (ADMIN/USER)
- **Middleware** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **SSR** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** API –æ—Ç–≤–µ—Ç–æ–≤
- **Lazy loading** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- **Unit —Ç–µ—Å—Ç—ã** –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **Integration —Ç–µ—Å—Ç—ã** –¥–ª—è API
- **E2E —Ç–µ—Å—Ç—ã** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `ARCHITECTURE.md` - –ü–æ–¥—Ä–æ–±–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `MIGRATION_GUIDE.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
- `STRUCTURE_OVERVIEW.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

## üîÑ Workflow

1. **Domain** - –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
2. **Application** - –°–æ–∑–¥–∞–µ–º Use Cases
3. **Infrastructure** - –†–µ–∞–ª–∏–∑—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
4. **Presentation** - –°–æ–∑–¥–∞–µ–º UI
5. **Shared** - –î–æ–±–∞–≤–ª—è–µ–º —É—Ç–∏–ª–∏—Ç—ã

## üí° –ü—Ä–∏–Ω—Ü–∏–ø—ã

- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π —Å–ª–æ–π –∏–º–µ–µ—Ç —Å–≤–æ—é —Ä–æ–ª—å
- **–ò–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** - –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–æ–¥—É–ª–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö
- **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å —Ä–µ—à–∞–µ—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É
- **–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å/–∑–∞–∫—Ä—ã—Ç–æ—Å—Ç—å** - –æ—Ç–∫—Ä—ã—Ç –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∑–∞–∫—Ä—ã—Ç –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
